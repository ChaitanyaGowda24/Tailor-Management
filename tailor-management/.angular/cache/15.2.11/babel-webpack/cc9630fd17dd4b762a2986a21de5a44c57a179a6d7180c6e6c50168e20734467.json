{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"../../services/user.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/button\";\nfunction UserProfileComponent_button_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function UserProfileComponent_button_29_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.saveProfile());\n    });\n    i0.ɵɵtext(1, \" Save Changes \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class UserProfileComponent {\n  constructor(fb, snackBar, userService) {\n    this.fb = fb;\n    this.snackBar = snackBar;\n    this.userService = userService;\n    this.isEditing = false;\n    this.loggedInUser = null;\n    this.profileForm = this.fb.group({\n      name: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      address: ['', Validators.required],\n      phoneNumber: ['', Validators.required],\n      password: [''] // Add password field\n    });\n  }\n\n  ngOnInit() {\n    this.fetchUserDetails();\n  }\n  // Fetch user details from the backend\n  fetchUserDetails() {\n    const userId = localStorage.getItem('id');\n    if (userId) {\n      this.userService.getUserById(+userId).subscribe(user => {\n        this.loggedInUser = user;\n        this.profileForm.patchValue({\n          name: user.name,\n          email: user.email,\n          address: user.address,\n          phoneNumber: user.phoneNumber\n        });\n      }, error => {\n        this.snackBar.open('Failed to fetch user details', 'Close', {\n          duration: 3000\n        });\n      });\n    } else {\n      this.snackBar.open('User ID not found in localStorage', 'Close', {\n        duration: 3000\n      });\n    }\n  }\n  // Toggle edit mode\n  toggleEdit() {\n    this.isEditing = !this.isEditing;\n    if (!this.isEditing) {\n      this.profileForm.reset({\n        name: this.loggedInUser?.name,\n        email: this.loggedInUser?.email,\n        address: this.loggedInUser?.address,\n        phoneNumber: this.loggedInUser?.phoneNumber\n      });\n    }\n  }\n  saveProfile() {\n    if (this.profileForm.valid) {\n      const userId = localStorage.getItem('id'); // Get user ID from localStorage\n      if (!userId) {\n        this.snackBar.open('User ID not found in localStorage', 'Close', {\n          duration: 3000\n        });\n        return;\n      }\n      // Create the updated user object\n      const updatedUser = {\n        id: +userId,\n        name: this.profileForm.value.name,\n        email: this.profileForm.value.email,\n        address: this.profileForm.value.address,\n        phoneNumber: this.profileForm.value.phoneNumber,\n        password: this.profileForm.value.password || this.loggedInUser?.password || '',\n        role: this.loggedInUser?.role || 'CUSTOMER',\n        createdAt: this.loggedInUser?.createdAt || new Date() // Default creation date if not set\n      };\n\n      console.log('Sending updated user data:', updatedUser); // Debugging\n      console.log('User ID from localStorage:', userId); // Debugging\n      // Call the updateUser method with the userId from localStorage\n      this.userService.updateUser(+userId, updatedUser).subscribe(user => {\n        this.loggedInUser = user;\n        this.isEditing = false;\n        this.snackBar.open('Profile updated successfully!', 'Close', {\n          duration: 3000\n        });\n      }, error => {\n        console.error('Error updating profile:', error); // Debugging\n        this.snackBar.open('Failed to update profile', 'Close', {\n          duration: 3000\n        });\n      });\n    } else {\n      this.snackBar.open('Form is invalid', 'Close', {\n        duration: 3000\n      });\n    }\n  }\n  static {\n    this.ɵfac = function UserProfileComponent_Factory(t) {\n      return new (t || UserProfileComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.UserService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserProfileComponent,\n      selectors: [[\"app-user-profile\"]],\n      decls: 30,\n      vars: 7,\n      consts: [[1, \"profile-container\"], [1, \"profile-header\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"profile-content\"], [1, \"profile-picture-section\"], [1, \"profile-picture\"], [\"src\", \"assets/profile-logo.png\", \"alt\", \"Profile Picture\", 1, \"profile-img\"], [1, \"profile-details-section\"], [1, \"profile-form\", 3, \"formGroup\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"name\", 3, \"disabled\"], [\"matInput\", \"\", \"formControlName\", \"email\", 3, \"disabled\"], [\"matInput\", \"\", \"formControlName\", \"address\", 3, \"disabled\"], [\"matInput\", \"\", \"formControlName\", \"phoneNumber\", 3, \"disabled\"], [1, \"save-button\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"]],\n      template: function UserProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n          i0.ɵɵtext(3, \"User Profile\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function UserProfileComponent_Template_button_click_4_listener() {\n            return ctx.toggleEdit();\n          });\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 3)(7, \"div\", 4)(8, \"div\", 5);\n          i0.ɵɵelement(9, \"img\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"form\", 8)(12, \"mat-form-field\", 9)(13, \"mat-label\");\n          i0.ɵɵtext(14, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"mat-form-field\", 9)(17, \"mat-label\");\n          i0.ɵɵtext(18, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"mat-form-field\", 9)(21, \"mat-label\");\n          i0.ɵɵtext(22, \"Address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"input\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"mat-form-field\", 9)(25, \"mat-label\");\n          i0.ɵɵtext(26, \"Phone Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(27, \"input\", 13);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(28, \"div\", 14);\n          i0.ɵɵtemplate(29, UserProfileComponent_button_29_Template, 2, 0, \"button\", 15);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.isEditing ? \"Cancel\" : \"Edit Profile\", \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"formGroup\", ctx.profileForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.isEditing);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.isEditing);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.isEditing);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.isEditing);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isEditing);\n        }\n      },\n      dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i5.MatFormField, i5.MatLabel, i6.MatInput, i7.MatButton],\n      styles: [\".profile-container[_ngcontent-%COMP%] {\\r\\n  max-width: 1200px;\\r\\n  margin: 0 auto;\\r\\n  padding: 40px;\\r\\n  background-color: #ffffff; \\r\\n  border-radius: 15px;\\r\\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\\r\\n  font-family: 'Poppins', sans-serif; \\r\\n}\\r\\n\\r\\n\\r\\n.profile-header[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n  margin-bottom: 30px;\\r\\n}\\r\\n\\r\\n.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\r\\n  font-size: 2.5rem;\\r\\n  color: #2c3e50; \\r\\n  font-weight: 600;\\r\\n}\\r\\n\\r\\n.profile-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  background-color: #2c3e50; \\r\\n  color: white;\\r\\n  font-size: 1rem;\\r\\n  font-weight: 500;\\r\\n  padding: 10px 20px;\\r\\n  border-radius: 25px;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  transition: background-color 0.3s ease;\\r\\n}\\r\\n\\r\\n.profile-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #1a2530; \\r\\n}\\r\\n\\r\\n\\r\\n.profile-content[_ngcontent-%COMP%] {\\r\\n  display: grid;\\r\\n  grid-template-columns: 1fr 2fr;\\r\\n  gap: 30px;\\r\\n}\\r\\n\\r\\n\\r\\n.profile-picture-section[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.profile-picture[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.profile-img[_ngcontent-%COMP%] {\\r\\n  width: 220px;\\r\\n  height: 220px;\\r\\n  border-radius: 50%;\\r\\n  object-fit: cover;\\r\\n  border: 8px solid #2c3e50; \\r\\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\\r\\n}\\r\\n\\r\\n.profile-img[_ngcontent-%COMP%]:hover {\\r\\n  transform: scale(1.05);\\r\\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%] {\\r\\n  background-color: #f8f9fa; \\r\\n  padding: 30px;\\r\\n  border-radius: 15px;\\r\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n\\r\\n.profile-form[_ngcontent-%COMP%] {\\r\\n  display: grid;\\r\\n  gap: 20px;\\r\\n}\\r\\n\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%] {\\r\\n  font-size: 1.1rem;\\r\\n  color: #2c3e50; \\r\\n  padding: 10px 15px;\\r\\n  border-radius: 8px;\\r\\n  background-color: #ffffff; \\r\\n  border: 2px solid #e0e0e0; \\r\\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\\r\\n}\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:focus {\\r\\n  border-color: #2c3e50; \\r\\n  box-shadow: 0 0 8px rgba(44, 62, 80, 0.3); \\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%] {\\r\\n  color: #2c3e50; \\r\\n  font-size: 1rem;\\r\\n  font-weight: 500;\\r\\n  transition: color 0.3s ease;\\r\\n}\\r\\n\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%] {\\r\\n  color: #2c3e50; \\r\\n}\\r\\n\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%] {\\r\\n  color: #e0e0e0; \\r\\n}\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%] {\\r\\n  color: #2c3e50; \\r\\n}\\r\\n\\r\\n\\r\\n.profile-details-section[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]::placeholder {\\r\\n  color: #999999; \\r\\n  font-style: italic;\\r\\n}\\r\\n\\r\\n\\r\\n.change-password-section[_ngcontent-%COMP%] {\\r\\n  grid-column: span 2;\\r\\n  text-align: center;\\r\\n  margin-top: 30px;\\r\\n}\\r\\n\\r\\n.change-password-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  background-color: #2c3e50; \\r\\n  color: white;\\r\\n  font-size: 1rem;\\r\\n  font-weight: 500;\\r\\n  padding: 10px 20px;\\r\\n  border-radius: 25px;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  transition: background-color 0.3s ease;\\r\\n}\\r\\n\\r\\n.change-password-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #1a2530; \\r\\n}\\r\\n\\r\\n\\r\\n.save-button[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: flex-end;\\r\\n  margin-top: 30px;\\r\\n}\\r\\n\\r\\n.save-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  background-color: #2c3e50; \\r\\n  color: white;\\r\\n  font-size: 1rem;\\r\\n  font-weight: 500;\\r\\n  padding: 10px 20px;\\r\\n  border-radius: 25px;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  transition: background-color 0.3s ease;\\r\\n}\\r\\n\\r\\n.save-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #1a2530; \\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvdXNlci1wcm9maWxlL3VzZXItcHJvZmlsZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDRDQUE0QztBQUM1QztFQUNFLGlCQUFpQjtFQUNqQixjQUFjO0VBQ2QsYUFBYTtFQUNiLHlCQUF5QixFQUFFLHFCQUFxQjtFQUNoRCxtQkFBbUI7RUFDbkIseUNBQXlDO0VBQ3pDLGtDQUFrQyxFQUFFLGdCQUFnQjtBQUN0RDs7QUFFQSwyQkFBMkI7QUFDM0I7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsY0FBYyxFQUFFLHNDQUFzQztFQUN0RCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSxjQUFjO0VBQ3pDLFlBQVk7RUFDWixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGVBQWU7RUFDZixzQ0FBc0M7QUFDeEM7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSwyQkFBMkI7QUFDeEQ7O0FBRUEsMkJBQTJCO0FBQzNCO0VBQ0UsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixTQUFTO0FBQ1g7O0FBRUEsNEJBQTRCO0FBQzVCO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIseUJBQXlCLEVBQUUscUJBQXFCO0VBQ2hELHFEQUFxRDtBQUN2RDs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QiwwQ0FBMEM7QUFDNUM7O0FBRUEsNEJBQTRCO0FBQzVCO0VBQ0UseUJBQXlCLEVBQUUseUJBQXlCO0VBQ3BELGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsd0NBQXdDO0FBQzFDOztBQUVBLGlCQUFpQjtBQUNqQjtFQUNFLGFBQWE7RUFDYixTQUFTO0FBQ1g7O0FBRUEsd0JBQXdCO0FBQ3hCO0VBQ0UsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixjQUFjLEVBQUUsbUJBQW1CO0VBQ25DLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIseUJBQXlCLEVBQUUscUJBQXFCO0VBQ2hELHlCQUF5QixFQUFFLHNCQUFzQjtFQUNqRCx3REFBd0Q7QUFDMUQ7O0FBRUE7RUFDRSxxQkFBcUIsRUFBRSw4QkFBOEI7RUFDckQseUNBQXlDLEVBQUUsdUJBQXVCO0VBQ2xFLGFBQWE7QUFDZjs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxjQUFjLEVBQUUseUJBQXlCO0VBQ3pDLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsMkJBQTJCO0FBQzdCOztBQUVBLDJCQUEyQjtBQUMzQjtFQUNFLGNBQWMsRUFBRSxpQ0FBaUM7QUFDbkQ7O0FBRUEsb0JBQW9CO0FBQ3BCO0VBQ0UsY0FBYyxFQUFFLHVCQUF1QjtBQUN6Qzs7QUFFQTtFQUNFLGNBQWMsRUFBRSxtQ0FBbUM7QUFDckQ7O0FBRUEsd0JBQXdCO0FBQ3hCO0VBQ0UsY0FBYyxFQUFFLGdDQUFnQztFQUNoRCxrQkFBa0I7QUFDcEI7O0FBRUEsMkJBQTJCO0FBQzNCO0VBQ0UsbUJBQW1CO0VBQ25CLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSxjQUFjO0VBQ3pDLFlBQVk7RUFDWixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGVBQWU7RUFDZixzQ0FBc0M7QUFDeEM7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSwyQkFBMkI7QUFDeEQ7O0FBRUEsZ0JBQWdCO0FBQ2hCO0VBQ0UsYUFBYTtFQUNiLHlCQUF5QjtFQUN6QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSxjQUFjO0VBQ3pDLFlBQVk7RUFDWixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGVBQWU7RUFDZixzQ0FBc0M7QUFDeEM7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSwyQkFBMkI7QUFDeEQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBHbG9iYWwgc3R5bGVzIGZvciB0aGUgcHJvZmlsZSBjb250YWluZXIgKi9cclxuLnByb2ZpbGUtY29udGFpbmVyIHtcclxuICBtYXgtd2lkdGg6IDEyMDBweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxuICBwYWRkaW5nOiA0MHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7IC8qIFdoaXRlIGJhY2tncm91bmQgKi9cclxuICBib3JkZXItcmFkaXVzOiAxNXB4O1xyXG4gIGJveC1zaGFkb3c6IDAgOHB4IDE2cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gIGZvbnQtZmFtaWx5OiAnUG9wcGlucycsIHNhbnMtc2VyaWY7IC8qIE1vZGVybiBmb250ICovXHJcbn1cclxuXHJcbi8qIFByb2ZpbGUgaGVhZGVyIHNlY3Rpb24gKi9cclxuLnByb2ZpbGUtaGVhZGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbn1cclxuXHJcbi5wcm9maWxlLWhlYWRlciBoMSB7XHJcbiAgZm9udC1zaXplOiAyLjVyZW07XHJcbiAgY29sb3I6ICMyYzNlNTA7IC8qIE5hdnkgYmx1ZSBmb3IgYSBwcm9mZXNzaW9uYWwgbG9vayAqL1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbn1cclxuXHJcbi5wcm9maWxlLWhlYWRlciBidXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IC8qIE5hdnkgYmx1ZSAqL1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBmb250LXNpemU6IDFyZW07XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMjVweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlO1xyXG59XHJcblxyXG4ucHJvZmlsZS1oZWFkZXIgYnV0dG9uOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWEyNTMwOyAvKiBEYXJrZXIgc2hhZGUgZm9yIGhvdmVyICovXHJcbn1cclxuXHJcbi8qIFByb2ZpbGUgY29udGVudCBsYXlvdXQgKi9cclxuLnByb2ZpbGUtY29udGVudCB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAyZnI7XHJcbiAgZ2FwOiAzMHB4O1xyXG59XHJcblxyXG4vKiBQcm9maWxlIHBpY3R1cmUgc2VjdGlvbiAqL1xyXG4ucHJvZmlsZS1waWN0dXJlLXNlY3Rpb24ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLnByb2ZpbGUtcGljdHVyZSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4ucHJvZmlsZS1pbWcge1xyXG4gIHdpZHRoOiAyMjBweDtcclxuICBoZWlnaHQ6IDIyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBvYmplY3QtZml0OiBjb3ZlcjtcclxuICBib3JkZXI6IDhweCBzb2xpZCAjMmMzZTUwOyAvKiBOYXZ5IGJsdWUgYm9yZGVyICovXHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7XHJcbn1cclxuXHJcbi5wcm9maWxlLWltZzpob3ZlciB7XHJcbiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcclxuICBib3gtc2hhZG93OiAwIDEycHggMjRweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbn1cclxuXHJcbi8qIFByb2ZpbGUgZGV0YWlscyBzZWN0aW9uICovXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTsgLyogU29mdCBncmF5IGJhY2tncm91bmQgKi9cclxuICBwYWRkaW5nOiAzMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG5cclxuLyogRm9ybSBzdHlsaW5nICovXHJcbi5wcm9maWxlLWZvcm0ge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ2FwOiAyMHB4O1xyXG59XHJcblxyXG4vKiBJbnB1dCBmaWVsZCBzdHlsaW5nICovXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiAubWF0LWZvcm0tZmllbGQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbn1cclxuXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiAubWF0LWlucHV0LWVsZW1lbnQge1xyXG4gIGZvbnQtc2l6ZTogMS4xcmVtO1xyXG4gIGNvbG9yOiAjMmMzZTUwOyAvKiBOYXZ5IGJsdWUgdGV4dCAqL1xyXG4gIHBhZGRpbmc6IDEwcHggMTVweDtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgLyogV2hpdGUgYmFja2dyb3VuZCAqL1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkICNlMGUwZTA7IC8qIExpZ2h0IGdyYXkgYm9yZGVyICovXHJcbiAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuM3MgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7XHJcbn1cclxuXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiAubWF0LWlucHV0LWVsZW1lbnQ6Zm9jdXMge1xyXG4gIGJvcmRlci1jb2xvcjogIzJjM2U1MDsgLyogTmF2eSBibHVlIGJvcmRlciBvbiBmb2N1cyAqL1xyXG4gIGJveC1zaGFkb3c6IDAgMCA4cHggcmdiYSg0NCwgNjIsIDgwLCAwLjMpOyAvKiBTdWJ0bGUgZ2xvdyBlZmZlY3QgKi9cclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcblxyXG4vKiBMYWJlbCBzdHlsaW5nICovXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiAubWF0LWZvcm0tZmllbGQtbGFiZWwge1xyXG4gIGNvbG9yOiAjMmMzZTUwOyAvKiBOYXZ5IGJsdWUgZm9yIGxhYmVscyAqL1xyXG4gIGZvbnQtc2l6ZTogMXJlbTtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIHRyYW5zaXRpb246IGNvbG9yIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLyogRmxvYXRpbmcgbGFiZWwgc3R5bGluZyAqL1xyXG4ucHJvZmlsZS1kZXRhaWxzLXNlY3Rpb24gLm1hdC1mb3JtLWZpZWxkLm1hdC1mb2N1c2VkIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XHJcbiAgY29sb3I6ICMyYzNlNTA7IC8qIE5hdnkgYmx1ZSBmb3IgZm9jdXNlZCBsYWJlbHMgKi9cclxufVxyXG5cclxuLyogT3V0bGluZSBzdHlsaW5nICovXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiAubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1vdXRsaW5lIC5tYXQtZm9ybS1maWVsZC1vdXRsaW5lIHtcclxuICBjb2xvcjogI2UwZTBlMDsgLyogTGlnaHQgZ3JheSBvdXRsaW5lICovXHJcbn1cclxuXHJcbi5wcm9maWxlLWRldGFpbHMtc2VjdGlvbiAubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1vdXRsaW5lLm1hdC1mb2N1c2VkIC5tYXQtZm9ybS1maWVsZC1vdXRsaW5lIHtcclxuICBjb2xvcjogIzJjM2U1MDsgLyogTmF2eSBibHVlIG91dGxpbmUgd2hlbiBmb2N1c2VkICovXHJcbn1cclxuXHJcbi8qIFBsYWNlaG9sZGVyIHN0eWxpbmcgKi9cclxuLnByb2ZpbGUtZGV0YWlscy1zZWN0aW9uIC5tYXQtaW5wdXQtZWxlbWVudDo6cGxhY2Vob2xkZXIge1xyXG4gIGNvbG9yOiAjOTk5OTk5OyAvKiBMaWdodCBncmF5IHBsYWNlaG9sZGVyIHRleHQgKi9cclxuICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbn1cclxuXHJcbi8qIENoYW5nZSBwYXNzd29yZCBidXR0b24gKi9cclxuLmNoYW5nZS1wYXNzd29yZC1zZWN0aW9uIHtcclxuICBncmlkLWNvbHVtbjogc3BhbiAyO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBtYXJnaW4tdG9wOiAzMHB4O1xyXG59XHJcblxyXG4uY2hhbmdlLXBhc3N3b3JkLXNlY3Rpb24gYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyAvKiBOYXZ5IGJsdWUgKi9cclxuICBjb2xvcjogd2hpdGU7XHJcbiAgZm9udC1zaXplOiAxcmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDI1cHg7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLmNoYW5nZS1wYXNzd29yZC1zZWN0aW9uIGJ1dHRvbjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFhMjUzMDsgLyogRGFya2VyIHNoYWRlIGZvciBob3ZlciAqL1xyXG59XHJcblxyXG4vKiBTYXZlIGJ1dHRvbiAqL1xyXG4uc2F2ZS1idXR0b24ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICBtYXJnaW4tdG9wOiAzMHB4O1xyXG59XHJcblxyXG4uc2F2ZS1idXR0b24gYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyAvKiBOYXZ5IGJsdWUgKi9cclxuICBjb2xvcjogd2hpdGU7XHJcbiAgZm9udC1zaXplOiAxcmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDI1cHg7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLnNhdmUtYnV0dG9uIGJ1dHRvbjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFhMjUzMDsgLyogRGFya2VyIHNoYWRlIGZvciBob3ZlciAqL1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"AACA,SAAiCA,UAAU,QAAQ,gBAAgB;;;;;;;;;;;;IC6C/DC,iCAKC;IAFCA;MAAAA;MAAA;MAAA,OAASA,mCAAa;IAAA,EAAC;IAGvBA,8BACF;IAAAA,iBAAS;;;ADxCb,OAAM,MAAOC,oBAAoB;EAKjCC,YACYC,EAAe,EACfC,QAAqB,EACrBC,WAAwB;IAFxB,OAAE,GAAFF,EAAE;IACF,aAAQ,GAARC,QAAQ;IACR,gBAAW,GAAXC,WAAW;IANvB,cAAS,GAAG,KAAK;IACjB,iBAAY,GAAgB,IAAI;IAO5B,IAAI,CAACC,WAAW,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACnCC,IAAI,EAAE,CAAC,EAAE,EAAET,UAAU,CAACU,QAAQ,CAAC;MAC/BC,KAAK,EAAE,CAAC,EAAE,EAAE,CAACX,UAAU,CAACU,QAAQ,EAAEV,UAAU,CAACW,KAAK,CAAC,CAAC;MACpDC,OAAO,EAAE,CAAC,EAAE,EAAEZ,UAAU,CAACU,QAAQ,CAAC;MAClCG,WAAW,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACU,QAAQ,CAAC;MACrCI,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;KACjB,CAAC;EACA;;EAEAC,QAAQ;IACN,IAAI,CAACC,gBAAgB,EAAE;EACzB;EAEA;EACAA,gBAAgB;IACd,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,IAAI,CAAC;IACzC,IAAIF,MAAM,EAAE;MACV,IAAI,CAACX,WAAW,CAACc,WAAW,CAAC,CAACH,MAAM,CAAC,CAACI,SAAS,CAC5CC,IAAU,IAAI;QACb,IAAI,CAACC,YAAY,GAAGD,IAAI;QACxB,IAAI,CAACf,WAAW,CAACiB,UAAU,CAAC;UAC1Bf,IAAI,EAAEa,IAAI,CAACb,IAAI;UACfE,KAAK,EAAEW,IAAI,CAACX,KAAK;UACjBC,OAAO,EAAEU,IAAI,CAACV,OAAO;UACrBC,WAAW,EAAES,IAAI,CAACT;SACnB,CAAC;MACJ,CAAC,EACAY,KAAK,IAAI;QACR,IAAI,CAACpB,QAAQ,CAACqB,IAAI,CAAC,8BAA8B,EAAE,OAAO,EAAE;UAC1DC,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC,CACF;KACF,MAAM;MACL,IAAI,CAACtB,QAAQ,CAACqB,IAAI,CAAC,mCAAmC,EAAE,OAAO,EAAE;QAC/DC,QAAQ,EAAE;OACX,CAAC;;EAEN;EAEA;EACAC,UAAU;IACR,IAAI,CAACC,SAAS,GAAG,CAAC,IAAI,CAACA,SAAS;IAChC,IAAI,CAAC,IAAI,CAACA,SAAS,EAAE;MACnB,IAAI,CAACtB,WAAW,CAACuB,KAAK,CAAC;QACrBrB,IAAI,EAAE,IAAI,CAACc,YAAY,EAAEd,IAAI;QAC7BE,KAAK,EAAE,IAAI,CAACY,YAAY,EAAEZ,KAAK;QAC/BC,OAAO,EAAE,IAAI,CAACW,YAAY,EAAEX,OAAO;QACnCC,WAAW,EAAE,IAAI,CAACU,YAAY,EAAEV;OACjC,CAAC;;EAEN;EAEFkB,WAAW;IACT,IAAI,IAAI,CAACxB,WAAW,CAACyB,KAAK,EAAE;MAC1B,MAAMf,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;MAC3C,IAAI,CAACF,MAAM,EAAE;QACX,IAAI,CAACZ,QAAQ,CAACqB,IAAI,CAAC,mCAAmC,EAAE,OAAO,EAAE;UAC/DC,QAAQ,EAAE;SACX,CAAC;QACF;;MAGF;MACA,MAAMM,WAAW,GAAS;QACxBC,EAAE,EAAE,CAACjB,MAAM;QACXR,IAAI,EAAE,IAAI,CAACF,WAAW,CAAC4B,KAAK,CAAC1B,IAAI;QACjCE,KAAK,EAAE,IAAI,CAACJ,WAAW,CAAC4B,KAAK,CAACxB,KAAK;QACnCC,OAAO,EAAE,IAAI,CAACL,WAAW,CAAC4B,KAAK,CAACvB,OAAO;QACvCC,WAAW,EAAE,IAAI,CAACN,WAAW,CAAC4B,KAAK,CAACtB,WAAW;QAC/CC,QAAQ,EAAE,IAAI,CAACP,WAAW,CAAC4B,KAAK,CAACrB,QAAQ,IAAI,IAAI,CAACS,YAAY,EAAET,QAAQ,IAAI,EAAE;QAC9EsB,IAAI,EAAE,IAAI,CAACb,YAAY,EAAEa,IAAI,IAAI,UAAU;QAC3CC,SAAS,EAAE,IAAI,CAACd,YAAY,EAAEc,SAAS,IAAI,IAAIC,IAAI,EAAE,CAAE;OACxD;;MAEDC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEP,WAAW,CAAC,CAAC,CAAC;MACxDM,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEvB,MAAM,CAAC,CAAC,CAAC;MAEnD;MACA,IAAI,CAACX,WAAW,CAACmC,UAAU,CAAC,CAACxB,MAAM,EAAEgB,WAAW,CAAC,CAACZ,SAAS,CACxDC,IAAU,IAAI;QACb,IAAI,CAACC,YAAY,GAAGD,IAAI;QACxB,IAAI,CAACO,SAAS,GAAG,KAAK;QACtB,IAAI,CAACxB,QAAQ,CAACqB,IAAI,CAAC,+BAA+B,EAAE,OAAO,EAAE;UAC3DC,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC,EACAF,KAAK,IAAI;QACRc,OAAO,CAACd,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC,CAAC,CAAC;QACjD,IAAI,CAACpB,QAAQ,CAACqB,IAAI,CAAC,0BAA0B,EAAE,OAAO,EAAE;UACtDC,QAAQ,EAAE;SACX,CAAC;MACJ,CAAC,CACF;KACF,MAAM;MACL,IAAI,CAACtB,QAAQ,CAACqB,IAAI,CAAC,iBAAiB,EAAE,OAAO,EAAE;QAC7CC,QAAQ,EAAE;OACX,CAAC;;EAEN;;;uBA7GazB,oBAAoB;IAAA;EAAA;;;YAApBA,oBAAoB;MAAAwC;MAAAC;MAAAC;MAAAC;MAAAC;QAAA;UCbjC7C,8BAA+B;UAGvBA,4BAAY;UAAAA,iBAAK;UACrBA,iCAAiE;UAAvBA;YAAA,OAAS8C,gBAAY;UAAA,EAAC;UAC9D9C,YACF;UAAAA,iBAAS;UAIXA,8BAA6B;UAIvBA,yBAA+E;UACjFA,iBAAM;UAIRA,+BAAqC;UAGpBA,qBAAI;UAAAA,iBAAY;UAC3BA,6BAAiE;UACnEA,iBAAiB;UAEjBA,0CAAqC;UACxBA,sBAAK;UAAAA,iBAAY;UAC5BA,6BAAkE;UACpEA,iBAAiB;UAEjBA,0CAAqC;UACxBA,wBAAO;UAAAA,iBAAY;UAC9BA,6BAAoE;UACtEA,iBAAiB;UAEjBA,0CAAqC;UACxBA,6BAAY;UAAAA,iBAAY;UACnCA,6BAAwE;UAC1EA,iBAAiB;UAMvBA,gCAAyB;UACvBA,8EAOS;UACXA,iBAAM;;;UAjDFA,eACF;UADEA,0EACF;UAcQA,eAAyB;UAAzBA,2CAAyB;UAGYA,eAAuB;UAAvBA,yCAAuB;UAKtBA,eAAuB;UAAvBA,yCAAuB;UAKrBA,eAAuB;UAAvBA,yCAAuB;UAKnBA,eAAuB;UAAvBA,yCAAuB;UAYxEA,eAAe;UAAfA,oCAAe","names":["Validators","i0","UserProfileComponent","constructor","fb","snackBar","userService","profileForm","group","name","required","email","address","phoneNumber","password","ngOnInit","fetchUserDetails","userId","localStorage","getItem","getUserById","subscribe","user","loggedInUser","patchValue","error","open","duration","toggleEdit","isEditing","reset","saveProfile","valid","updatedUser","id","value","role","createdAt","Date","console","log","updateUser","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\My pc\\Desktop\\CAPSTONE-TEMP\\tailor-management\\src\\app\\pages\\user-profile\\user-profile.component.ts","C:\\Users\\My pc\\Desktop\\CAPSTONE-TEMP\\tailor-management\\src\\app\\pages\\user-profile\\user-profile.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ChangePasswordDialogComponent } from 'src/app/components/change-password-dialog/change-password-dialog.component';\r\nimport { User } from '../../models/user.model';\r\nimport { UserService } from '../../services/user.service';\r\n\r\n@Component({\r\nselector: 'app-user-profile',\r\ntemplateUrl: './user-profile.component.html',\r\nstyleUrls: ['./user-profile.component.css'],\r\n})\r\nexport class UserProfileComponent implements OnInit {\r\nprofileForm: FormGroup;\r\nisEditing = false;\r\nloggedInUser: User | null = null;\r\n\r\nconstructor(\r\n    private fb: FormBuilder,\r\n    private snackBar: MatSnackBar,\r\n    private userService: UserService\r\n  ) {\r\n    this.profileForm = this.fb.group({\r\n  name: ['', Validators.required],\r\n  email: ['', [Validators.required, Validators.email]],\r\n  address: ['', Validators.required],\r\n  phoneNumber: ['', Validators.required],\r\n   password: [''] // Add password field\r\n});\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.fetchUserDetails();\r\n  }\r\n\r\n  // Fetch user details from the backend\r\n  fetchUserDetails(): void {\r\n    const userId = localStorage.getItem('id');\r\n    if (userId) {\r\n      this.userService.getUserById(+userId).subscribe(\r\n        (user: User) => {\r\n          this.loggedInUser = user;\r\n          this.profileForm.patchValue({\r\n            name: user.name,\r\n            email: user.email,\r\n            address: user.address,\r\n            phoneNumber: user.phoneNumber,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.snackBar.open('Failed to fetch user details', 'Close', {\r\n            duration: 3000,\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.snackBar.open('User ID not found in localStorage', 'Close', {\r\n        duration: 3000,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Toggle edit mode\r\n  toggleEdit(): void {\r\n    this.isEditing = !this.isEditing;\r\n    if (!this.isEditing) {\r\n      this.profileForm.reset({\r\n        name: this.loggedInUser?.name,\r\n        email: this.loggedInUser?.email,\r\n        address: this.loggedInUser?.address,\r\n        phoneNumber: this.loggedInUser?.phoneNumber,\r\n      });\r\n    }\r\n  }\r\n\r\nsaveProfile(): void {\r\n  if (this.profileForm.valid) {\r\n    const userId = localStorage.getItem('id'); // Get user ID from localStorage\r\n    if (!userId) {\r\n      this.snackBar.open('User ID not found in localStorage', 'Close', {\r\n        duration: 3000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Create the updated user object\r\n    const updatedUser: User = {\r\n      id: +userId, // Use the userId from localStorage\r\n      name: this.profileForm.value.name,\r\n      email: this.profileForm.value.email,\r\n      address: this.profileForm.value.address,\r\n      phoneNumber: this.profileForm.value.phoneNumber,\r\n      password: this.profileForm.value.password || this.loggedInUser?.password || '', // Retain previous password if not edited\r\n      role: this.loggedInUser?.role || 'CUSTOMER', // Default role if not set\r\n      createdAt: this.loggedInUser?.createdAt || new Date(), // Default creation date if not set\r\n    };\r\n\r\n    console.log('Sending updated user data:', updatedUser); // Debugging\r\n    console.log('User ID from localStorage:', userId); // Debugging\r\n\r\n    // Call the updateUser method with the userId from localStorage\r\n    this.userService.updateUser(+userId, updatedUser).subscribe(\r\n      (user: User) => {\r\n        this.loggedInUser = user;\r\n        this.isEditing = false;\r\n        this.snackBar.open('Profile updated successfully!', 'Close', {\r\n          duration: 3000,\r\n        });\r\n      },\r\n      (error) => {\r\n        console.error('Error updating profile:', error); // Debugging\r\n        this.snackBar.open('Failed to update profile', 'Close', {\r\n          duration: 3000,\r\n        });\r\n      }\r\n    );\r\n  } else {\r\n    this.snackBar.open('Form is invalid', 'Close', {\r\n      duration: 3000,\r\n    });\r\n  }\r\n}\r\n}\r\n","<div class=\"profile-container\">\r\n  <!-- Profile Header -->\r\n  <div class=\"profile-header\">\r\n    <h1>User Profile</h1>\r\n    <button mat-raised-button color=\"primary\" (click)=\"toggleEdit()\">\r\n      {{ isEditing ? 'Cancel' : 'Edit Profile' }}\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Profile Content -->\r\n  <div class=\"profile-content\">\r\n    <!-- Profile Picture Section -->\r\n    <div class=\"profile-picture-section\">\r\n      <div class=\"profile-picture\">\r\n        <img src=\"assets/profile-logo.png\" alt=\"Profile Picture\" class=\"profile-img\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Profile Details Section -->\r\n    <div class=\"profile-details-section\">\r\n      <form [formGroup]=\"profileForm\" class=\"profile-form\">\r\n        <mat-form-field appearance=\"outline\">\r\n          <mat-label>Name</mat-label>\r\n          <input matInput formControlName=\"name\" [disabled]=\"!isEditing\" />\r\n        </mat-form-field>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n          <mat-label>Email</mat-label>\r\n          <input matInput formControlName=\"email\" [disabled]=\"!isEditing\" />\r\n        </mat-form-field>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n          <mat-label>Address</mat-label>\r\n          <input matInput formControlName=\"address\" [disabled]=\"!isEditing\" />\r\n        </mat-form-field>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n          <mat-label>Phone Number</mat-label>\r\n          <input matInput formControlName=\"phoneNumber\" [disabled]=\"!isEditing\" />\r\n        </mat-form-field>\r\n      </form>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Save Button -->\r\n  <div class=\"save-button\">\r\n    <button\r\n      mat-raised-button\r\n      color=\"primary\"\r\n      (click)=\"saveProfile()\"\r\n      *ngIf=\"isEditing\"\r\n    >\r\n      Save Changes\r\n    </button>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}